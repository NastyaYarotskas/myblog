CREATE TABLE IF NOT EXISTS posts
(
	id bigserial PRIMARY KEY,
	title varchar(256) NOT NULL,
	image text NOT NULL,
	content text NOT NULL,
	like_count int DEFAULT 0
);

CREATE TABLE IF NOT EXISTS comments
(
	id bigserial PRIMARY KEY,
	post_id bigserial REFERENCES posts(id) ON DELETE CASCADE,
	description text NOT NULL
);

CREATE TABLE IF NOT EXISTS tags
(
	id bigserial PRIMARY KEY,
	name text NOT NULL
);

CREATE TABLE IF NOT EXISTS posts_tags
(
	tag_id bigserial REFERENCES tags(id) ON DELETE CASCADE,
    post_id bigserial REFERENCES posts(id) ON DELETE CASCADE,
	PRIMARY KEY(post_id, tag_id)
);

------ TEST DATA

INSERT INTO posts(title, content, image, like_count)
VALUES ('Рецепт идеального чизкейка', 'Чизкейк — это один из моих любимых десертов. Сегодня я расскажу, как приготовить идеальный чизкейк в домашних условиях. Для этого вам понадобятся простые ингредиенты: творожный сыр, печенье, сливки и немного терпения. Я также поделюсь секретами, как сделать торт нежным и воздушным. Этот рецепт подойдёт даже для тех, кто никогда раньше не готовил десерты. Попробуйте — и ваши гости будут в восторге!', 'https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80', 20),
       ('Топ-5 книг для саморазвития', 'Книги — это мощный инструмент для саморазвития. В этой статье я поделюсь списком из пяти книг, которые помогли мне изменить свою жизнь к лучшему. Среди них — книги по тайм-менеджменту, психологии и мотивации. Каждая из них содержит практические советы, которые можно применять в повседневной жизни. Если вы хотите стать более продуктивным, уверенным в себе и счастливым, эти книги станут отличным началом.', 'https://images.unsplash.com/photo-1495446815901-a7297e633e8d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80', 10),
       ('Как начать бегать: советы для новичков', 'Бег — это отличный способ поддерживать себя в форме, улучшить здоровье и поднять настроение. Однако многие новички сталкиваются с трудностями: быстро устают, теряют мотивацию или получают травмы. В этой статье я расскажу, как начать бегать правильно. Вы узнаете, как выбрать подходящую обувь, как составить план тренировок и как избежать распространённых ошибок. Бег может быть приятным и полезным, если подойти к нему с умом.', 'https://images.unsplash.com/photo-1541534741688-6078c6bfb5c5?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80', 15),
       ('Как выбрать ноутбук для работы и учёбы', 'Выбор ноутбука — это важное решение, особенно если вы планируете использовать его для работы или учёбы. В этой статье я расскажу, на что обратить внимание при покупке: процессор, оперативная память, ёмкость батареи и другие характеристики. Я также поделюсь советами, как выбрать ноутбук в зависимости от ваших задач. Например, для работы с текстами подойдёт более простая модель, а для графики или программирования потребуется мощное устройство.', 'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80', 12),
       ('Путешествие в горы: впечатления и советы', 'Недавно я вернулся из поездки в горы, и хочу поделиться своими впечатлениями. Мы отправились в горный регион, где провели неделю, наслаждаясь природой и чистым воздухом. В этой статье я расскажу о маршрутах, которые мы выбрали, о том, как подготовиться к походу, и дам несколько советов для тех, кто только планирует своё путешествие. Горы — это не только красиво, но и полезно для здоровья. Однако важно правильно подготовиться, чтобы избежать неприятных сюрпризов.', 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80', 10);

INSERT INTO comments(post_id, description)
VALUES (1, 'FIRST COMMENT'),
       (1, 'SECOND COMMENT'),
       (2, 'THIRD COMMENT'),
       (1, 'FORTH COMMENT');

INSERT INTO tags(name)
VALUES ('#FIRST_TAG'),
       ('#SECOND_TAG'),
       ('#THIRD_TAG');

INSERT INTO posts_tags(tag_id, post_id)
VALUES (1, 1),
       (1, 2),
       (2, 1),
       (3, 2);